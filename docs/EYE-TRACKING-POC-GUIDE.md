# 👁️ Eye Tracking PoC - 테스트 가이드

**작성일**: 2026-01-27
**버전**: v0.1 (Proof of Concept)
**예상 테스트 시간**: 5-10분

---

## 📋 PoC 목표

이 Proof of Concept은 WebGazer.js를 사용하여 **시선 추적 기능의 기술적 타당성**을 검증하는 것입니다.

### ✨ 구현된 기능
- ✅ WebGazer.js 라이브러리 통합
- ✅ 시선 위치 추적 및 시각화 (빨간 십자 커서)
- ✅ 스무딩 필터 적용 (부드러운 움직임)
- ✅ 클릭 기반 보정 (사용자가 클릭할수록 정확도 향상)
- ✅ On/Off 토글 버튼

### 🚧 미구현 기능 (향후 계획)
- ⏳ Dwell-based 그리기 (머무름으로 그리기)
- ⏳ 9-point 보정 시스템
- ⏳ 눈 제스처 인식 (깜빡임, 윙크)
- ⏳ 접근성 UI 개선
- ⏳ 음성 피드백

---

## 🚀 실행 방법

### 1. Live Server 시작
```bash
# VSCode/Cursor에서 Live Server 실행
# 또는 로컬 서버 실행
python -m http.server 8000
# 또는
npx serve
```

### 2. 브라우저에서 열기
```
http://localhost:8000
# 또는 Live Server URL
```

### 3. Eye Tracking 활성화
1. 웹 페이지가 로드되면 우측 툴박스에서 스크롤
2. **"♿ Accessibility (PoC)"** 섹션 찾기
3. **"👁️ Eye Tracking"** 버튼 클릭

### 4. 웹캠 권한 허용
- 브라우저에서 웹캠 접근 권한 요청 팝업 표시
- **"허용(Allow)"** 클릭

---

## 📸 웹캠 설정 최적화

### 권장 환경
| 항목 | 권장 사항 |
|------|-----------|
| **조명** | 밝은 간접 조명 (얼굴에 그림자 없이) |
| **웹캠 위치** | 모니터 중앙, 눈높이 |
| **거리** | 얼굴과 모니터 사이 40-60cm |
| **자세** | 정면을 바라보고 머리 고정 |
| **배경** | 단순한 배경 (복잡한 배경 피하기) |

### 일반적인 문제 해결

#### 문제 1: 웹캠 권한 거부
**증상**: 버튼 클릭 시 아무 반응 없음
**해결**:
1. 브라우저 주소창 좌측 자물쇠 아이콘 클릭
2. 카메라 권한 → "허용"
3. 페이지 새로고침

#### 문제 2: 시선 커서가 보이지 않음
**증상**: Eye Tracking 활성화했지만 빨간 커서 없음
**해결**:
1. 콘솔 확인 (F12 → Console)
2. "Eye tracking initialized" 메시지 확인
3. 웹캠 미리보기 창이 보이는지 확인
4. 화면 어딘가를 클릭해보기

#### 문제 3: 시선 커서가 부정확함
**증상**: 커서가 실제 시선과 다른 곳을 가리킴
**해결**:
1. **보정 필요**: 화면의 여러 지점을 10회 이상 클릭
2. 클릭할 때마다 녹색 원 애니메이션이 표시됨
3. 클릭 후 시선 정확도가 점차 향상됨

#### 문제 4: 조명이 어두움
**증상**: 얼굴 인식이 안 되거나 정확도 매우 낮음
**해결**:
1. 방 조명 켜기
2. 데스크 램프로 얼굴 밝히기 (정면에서)
3. 창문 쪽 자리로 이동

#### 문제 5: 성능 문제 (느림)
**증상**: 페이지가 버벅거리거나 커서 움직임이 끊김
**해결**:
1. 다른 탭 닫기 (메모리 확보)
2. WebGazer 웹캠 미리보기 창 크기 조절
3. 저사양 PC의 경우 눈 추적 비활성화

---

## 🧪 테스트 시나리오

### Scenario 1: 기본 작동 확인 (필수)
1. ✅ Eye Tracking 버튼 클릭
2. ✅ 웹캠 권한 허용
3. ✅ 안내 메시지 팝업 표시 확인
4. ✅ 빨간 십자 커서가 시선을 따라 움직이는지 확인
5. ✅ 버튼 다시 클릭하여 비활성화 확인

**예상 결과**:
- 시선 커서가 부드럽게 움직임
- 웹캠 미리보기 창 표시 (작은 창)
- 버튼이 녹색으로 하이라이트

### Scenario 2: 보정 테스트
1. ✅ Eye Tracking 활성화
2. ✅ 화면 좌상단 클릭 (시선으로 봤다가 클릭)
3. ✅ 녹색 원 애니메이션 확인
4. ✅ 화면 우상단, 중앙, 좌하단, 우하단 각각 클릭 (총 5회)
5. ✅ 다시 화면 이곳저곳 응시하며 정확도 확인

**예상 결과**:
- 클릭할수록 시선 커서가 실제 시선에 가까워짐
- 5회 클릭 후 오차 범위 100-200px 이내

### Scenario 3: 정확도 평가
1. ✅ 보정 완료 (10회 이상 클릭)
2. ✅ 캔버스 중앙의 특정 점 응시
3. ✅ 시선 커서가 응시 지점에서 얼마나 떨어져 있는지 측정
4. ✅ 여러 지점에서 반복 (좌상, 우상, 중앙, 좌하, 우하)

**평가 기준**:
- ⭐⭐⭐⭐⭐ 탁월: 50px 이내 오차
- ⭐⭐⭐⭐ 좋음: 100px 이내 오차
- ⭐⭐⭐ 보통: 150px 이내 오차
- ⭐⭐ 낮음: 200px 이내 오차
- ⭐ 매우 낮음: 200px 이상 오차

### Scenario 4: 성능 테스트
1. ✅ Eye Tracking 활성화
2. ✅ Chrome DevTools 열기 (F12)
3. ✅ Performance 탭에서 "Record" 시작
4. ✅ 10초간 화면을 둘러보기
5. ✅ Record 중지하고 CPU 사용률 확인

**평가 기준**:
- ✅ 양호: CPU 사용률 < 30%
- ⚠️ 주의: CPU 사용률 30-50%
- ❌ 불량: CPU 사용률 > 50%

### Scenario 5: 다양한 조건 테스트
| 조건 | 테스트 항목 | 예상 결과 |
|------|-------------|-----------|
| **밝은 조명** | 형광등 켜고 테스트 | 정확도 향상 |
| **어두운 조명** | 조명 끄고 테스트 | 정확도 하락 또는 작동 불가 |
| **안경 착용** | 안경 쓰고 테스트 | 약간의 정확도 하락 |
| **머리 움직임** | 머리를 좌우로 흔들며 테스트 | 커서 불안정 |
| **빠른 눈 움직임** | 시선을 빠르게 이동 | 커서 지연 (0.1-0.3초) |

---

## 📊 테스트 결과 기록 (예시)

### 테스트 환경
- **날짜**: 2026-01-27
- **브라우저**: Chrome 120.0
- **웹캠**: Logitech C920 (1080p)
- **조명**: 밝은 실내 (형광등)
- **PC 사양**: MacBook Pro M1

### 테스트 결과

#### 1. 기본 작동
- ✅ 초기화 성공 (3초 소요)
- ✅ 시선 커서 정상 표시
- ✅ 스무딩 적용 (부드러운 움직임)

#### 2. 정확도 (보정 후)
| 화면 위치 | 오차 (픽셀) | 평가 |
|-----------|-------------|------|
| 좌상단 | ~120px | ⭐⭐⭐⭐ |
| 우상단 | ~100px | ⭐⭐⭐⭐ |
| 중앙 | ~80px | ⭐⭐⭐⭐ |
| 좌하단 | ~150px | ⭐⭐⭐ |
| 우하단 | ~140px | ⭐⭐⭐ |

**평균 오차**: ~118px
**종합 평가**: ⭐⭐⭐⭐ (좋음)

#### 3. 성능
- CPU 사용률: 25-30%
- 메모리: ~180MB
- 프레임레이트: 30 FPS
- **평가**: ✅ 양호

#### 4. 사용성
- 보정 난이도: 쉬움 (10회 클릭으로 충분)
- 학습 곡선: 5분 이내 익숙해짐
- 피로도: 낮음 (10분 사용 기준)

---

## 🎯 PoC 결론

### ✅ 검증된 사항
1. **기술적 타당성**: WebGazer.js가 웹 환경에서 작동 가능
2. **정확도**: 100-150px 오차로 그림 그리기에 충분 (굵은 브러시 사용 시)
3. **성능**: CPU 30% 이하로 실용적
4. **접근성**: 웹캠만 있으면 추가 하드웨어 불필요

### ⚠️ 제한사항
1. **정밀도 한계**: 픽셀 단위 정밀 작업은 어려움
2. **환경 의존성**: 조명, 웹캠 품질에 따라 편차 큼
3. **보정 필요**: 매 세션마다 보정 과정 필요 (30초-1분)
4. **피로도**: 장시간 사용 시 눈 피로 가능

### 🚀 다음 단계 권장사항

#### 옵션 A: Full 구현 진행 (권장)
**조건**: PoC 테스트 결과가 ⭐⭐⭐ 이상
- Phase 2: 9-point 보정 시스템
- Phase 3: Dwell-based 그리기
- Phase 4: 눈 제스처 인식

#### 옵션 B: 개선 후 재평가
**조건**: PoC 테스트 결과가 ⭐⭐ 이하
- 조명 환경 개선
- 웹캠 업그레이드
- 보정 알고리즘 튜닝

#### 옵션 C: 보류
**조건**: 기술적 한계가 명확하거나 성능 문제 심각
- 하드웨어 아이트래커 고려
- 대체 접근성 기능 탐색 (음성 제어 등)

---

## 📝 피드백 양식

### 테스트 후 아래 질문에 답변해주세요:

1. **초기화 성공 여부**: ✅ / ❌
2. **시선 커서 정확도**: ⭐⭐⭐⭐⭐ / ⭐⭐⭐⭐ / ⭐⭐⭐ / ⭐⭐ / ⭐
3. **보정 난이도**: 쉬움 / 보통 / 어려움
4. **성능 (끊김/버벅임)**: 없음 / 약간 / 심함
5. **실제 그림 그리기에 사용 가능?**: 예 / 아니오
6. **개선이 필요한 부분**: (자유 기술)

---

## 🔧 개발자용 디버깅

### 콘솔 로그 확인
```javascript
// F12 → Console에서 확인 가능한 로그:
// "👁️ Eye Tracking PoC loaded"
// "Initializing WebGazer..."
// "✅ Eye tracking initialized successfully"
// "👁️ Eye tracking started"
// "⏸️ Eye tracking paused"
```

### WebGazer 상태 확인
```javascript
// Console에서 직접 실행:
webgazer.params // 현재 파라미터 확인
webgazer.getTracker() // 현재 트래커 정보
eyeTrackingPoC.isActive // 활성화 상태
eyeTrackingPoC.currentX // 현재 X 좌표
eyeTrackingPoC.currentY // 현재 Y 좌표
```

### 커스터마이즈
```javascript
// 스무딩 조절 (0.0 = 부드러움, 1.0 = 즉각 반응)
eyeTrackingPoC.smoothing = 0.5;

// WebGazer 예측 포인트 표시 (디버깅용)
webgazer.showPredictionPoints(true);
```

---

## 🆘 문제 발생 시

### 긴급 중지
Eye Tracking이 제대로 작동하지 않거나 문제가 생기면:
1. **버튼 클릭**: 👁️ Eye Tracking 버튼 다시 클릭
2. **콘솔 명령**: `eyeTrackingPoC.end()`
3. **페이지 새로고침**: F5 또는 Ctrl+R

### 이슈 리포팅
문제 발견 시 아래 정보와 함께 보고:
- 브라우저 종류 및 버전
- 웹캠 모델
- 콘솔 에러 메시지 스크린샷
- 재현 단계

---

**테스트 완료 후 다음 문서로**:
- Full 구현 시: `docs/EYE-TRACKING-FEATURE-PLAN.md` 참고
- 이슈 발견 시: GitHub Issues 생성

---

**Happy Testing!** 👁️✨
